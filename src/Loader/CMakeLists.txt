if(NOT WIN32 OR NOT CMAKE_SIZEOF_VOID_P EQUAL 4)
	message(WARNING Skipping shady-loader: Can only build on Windows 32bits)
else()
    add_library(shady-loader MODULE main.cpp menu.cpp converter.cpp modpackage.cpp asynctask.cpp reader.cpp)
    target_link_libraries(shady-loader -static shady-core libcurl SokuEngine json)
    set_target_properties(shady-loader PROPERTIES LINK_FLAGS "/DELAYLOAD:SokuEngine.dll")
    install(TARGETS shady-loader LIBRARY DESTINATION soku-modules)
endif()

add_executable(shady-manage manager.cpp asynctask.cpp modpackage.cpp)
target_link_libraries(shady-manage -static libcurl termcolor json)
